{"version":3,"sources":["demo/home.module.css","../../src/core/index.ts","../../src/storage/utils.ts","../../src/storage/in-memory-store.ts","../../src/storage/session-store.ts","../../src/storage/index.tsx","../../src/index.ts","app.module.css","../../src/react/context.tsx","../../src/react/admin-styles.tsx","../../src/react/admin.tsx","../../src/react/hooks.tsx","feature-flags.tsx","demo/home.tsx","demo/home-new.tsx","demo/demo.tsx","app.tsx","serviceWorker.ts","index.tsx","../../src/react/provider.tsx","demo/demo.module.css"],"names":["module","exports","makeArray","val","Array","isArray","getFlagDefaultValue","flagDef","undefined","default","getResolvedFlagValue","definitions","flagName","storageMap","getFlagDef","defaultValue","value","resolveFlagStorage","get","getFlagValue","setFlagValue","storage","JSON","stringify","remove","console","warn","name","set","storageName","flagg","_definitions","hydrateFrom","_storage","storageArr","reduce","acc","makeStorageMap","hydrateFromStorages","hydrate","forEach","hydrateStorage","a","all","values","String","getDefault","isOn","flagNameOrFlags","Object","entries","isOverridden","options","getFlagType","setDefinitions","newDefinitions","getDefinitions","getAllResolved","keys","getAllOverridden","getKey","key","KEY_PREFIX","safeParseJSON","parse","err","mapFromStoredValuesWithPrefix","stored","getter","startsWith","hasPrefix","slice","length","removePrefix","inMemoryStore","store","sessionStore","window","sessionStorage","getItem","setItem","removeItem","FlaggContext","React","createContext","featureFlags","iteration","FlaggAdmin","onDone","useState","searchTerm","setSearchTerm","ff","useContext","getSortedDefinitions","toLowerCase","trim","shareUrl","location","href","encodeURIComponent","className","styles","Icon","icon","onClick","navigator","clipboard","writeText","onChange","evt","currentTarget","type","placeholder","map","categoryName","definition","Flag","Footer","iconPaths","flag","search","refresh","checkCircle","link","props","path","width","height","viewBox","fill","d","control","controlType","getControlType","isOverride","Select","Input","Toggle","checked","description","title","filter","Boolean","join","stopPropagation","option","defsMap","parts","split","category","pop","includes","push","sort","b","useFeatureFlag","ffUseFeatureFlag","useFeatureValue","ffUseFeatureValue","Home","cards","enableOptIn","setHomeV2","banner","index","HomeCard","homeCard","sixteenByNine","style","backgroundImage","padding","use","tag","theme","marginTop","onIcon","HomeNew","Demo","route","setRoute","navOpen","setNavOpen","isDarkMode","brandColor","isBottomNav","homeV2","enableFlagg","content","view","callout","appWrapper","classNames","app","darkMode","bottomNavHeader","bottomNav","stacked","label","navigationIcon","appBar","AppDrawer","open","setOpen","modal","onClose","App","hostname","match","ReactDOM","render","children","setIteration","useEffect","originalSet","rVal","Provider","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.9cbf6c44.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"homeCard\":\"home_homeCard__2nPym\",\"banner\":\"home_banner__1loZD\"};","import {\n  FlaggOpts,\n  FlaggStorage,\n  FlagDefinition,\n  FlagDefinitions,\n  FlagValue,\n  FlaggReadOnlyStorage,\n  FlaggStorageInput\n} from './defs';\n\nexport * from './defs';\n\ntype ReadOrWriteStorage = FlaggStorage | FlaggReadOnlyStorage;\n\nconst DEFAULT_STORAGE_NAME = '_default';\n\n/** Ensures a value is an array */\nconst makeArray = <T>(val: T) =>\n  Array.isArray(val) ? (val as T) : !!val ? ([val] as T[]) : [];\n\n/** Takes a single or array of storage items and makes a name -> value map */\nconst makeStorageMap = (\n  _storage: FlaggStorageInput\n): { [storageName: string]: ReadOrWriteStorage } => {\n  const storageArr = makeArray(_storage) as ReadOrWriteStorage[];\n  return storageArr.reduce<{\n    [storageName: string]: ReadOrWriteStorage;\n  }>(\n    (acc, storage) => {\n      acc[storage.name] = storage;\n      return acc;\n    },\n    { [DEFAULT_STORAGE_NAME]: storageArr[0] }\n  );\n};\n\n/** Get the default value for a flag from its definition */\nconst getFlagDefaultValue = ({ flagDef }: { flagDef: FlagDefinition }) =>\n  flagDef.default === undefined ? null : flagDef.default;\n\n/** Get the value set for the flag for its storage */\nconst getFlagValue = ({\n  flagDef,\n  flagName,\n  storageMap\n}: {\n  flagDef: FlagDefinition;\n  flagName: string;\n  storageMap: { [storageName: string]: ReadOrWriteStorage };\n}) => {\n  const storage = resolveFlagStorage({ flagDef, storageMap });\n  return storage.get(flagName);\n};\n\n/** Get the fully resolved flag value taking into account the default fallback */\nconst getResolvedFlagValue = ({\n  definitions,\n  flagName,\n  storageMap\n}: {\n  definitions: FlagDefinitions;\n  flagName: string;\n  storageMap: { [storageName: string]: ReadOrWriteStorage };\n}) => {\n  const flagDef = getFlagDef({ definitions, flagName });\n\n  if (!flagDef) {\n    return null;\n  }\n\n  const defaultValue = getFlagDefaultValue({\n    flagDef\n  });\n\n  const value = getFlagValue({\n    flagDef,\n    flagName,\n    storageMap\n  });\n\n  if (value === undefined || value === null) {\n    return defaultValue;\n  }\n\n  return value;\n};\n\n/** Get the fully resolved flag value taking into account the default fallback */\nconst setFlagValue = ({\n  definitions,\n  flagName,\n  value,\n  storageMap\n}: {\n  value: FlagValue;\n  definitions: FlagDefinitions;\n  flagName: string;\n  storageMap: { [storageName: string]: ReadOrWriteStorage };\n}) => {\n  const flagDef = getFlagDef({ definitions, flagName });\n  const storage = resolveFlagStorage({ flagDef, storageMap });\n  const defaultValue = getFlagDefaultValue({\n    flagDef\n  });\n\n  if (JSON.stringify(value) === JSON.stringify(defaultValue)) {\n    /* istanbul ignore else  */\n    if ('remove' in storage) {\n      storage.remove(flagName);\n    } else {\n      console.warn(\n        `Flagg: Attempting to write to readOnly storage ${storage.name}`\n      );\n    }\n  } else {\n    if ('set' in storage) {\n      storage.set(flagName, value);\n    } else {\n      console.warn(\n        `Flagg: Attempting to write to readOnly storage ${storage.name}`\n      );\n    }\n  }\n};\n\n/** Get the definition for a flag */\nconst getFlagDef = ({\n  definitions,\n  flagName\n}: {\n  definitions: FlagDefinitions;\n  flagName: string;\n}) => definitions[flagName];\n\n/** Get the storage instance for a flag definition */\nconst resolveFlagStorage = ({\n  flagDef,\n  storageMap\n}: {\n  flagDef: FlagDefinition;\n  storageMap: { [storageName: string]: ReadOrWriteStorage };\n}) => {\n  const storageName = flagDef.storage as string;\n  if (storageMap[storageName]) return storageMap[storageName];\n\n  if (storageName !== undefined) {\n    console.warn(\n      `Flagg storage \"${storageName}\" not available. Did you forget to include it? Using default storage instead.`\n    );\n  }\n  return storageMap[DEFAULT_STORAGE_NAME];\n};\n\nconst getFlagType = ({ flagDef }: { flagDef: FlagDefinition }) => {\n  if (flagDef.options) {\n    return 'select';\n  }\n\n  if (typeof flagDef.default === 'string') {\n    return 'string';\n  }\n\n  return 'boolean';\n};\n\n/** Create a new feature flags store with Flagg. */\nexport const flagg = <FFKeys extends string>({\n  storage,\n  definitions: _definitions = {},\n  hydrateFrom\n}: FlaggOpts) => {\n  let definitions = _definitions;\n  const storageMap = makeStorageMap(storage);\n  const hydrateFromStorages = makeArray(\n    hydrateFrom\n  ) as FlaggReadOnlyStorage[];\n\n  const hydrate = () => {\n    hydrateFromStorages.forEach(async hydrateStorage => {\n      const values = await hydrateStorage.all();\n      set(values as Partial<{ [key in FFKeys]: FlagValue }>);\n    });\n  };\n\n  const get = (flagName: FFKeys): FlagValue =>\n    getResolvedFlagValue({\n      definitions,\n      flagName: String(flagName),\n      storageMap\n    });\n\n  const getDefault = (flagName: FFKeys): FlagValue =>\n    getFlagDefaultValue({\n      flagDef: getFlagDef({ definitions, flagName })\n    });\n\n  const isOn = (flagName: FFKeys): boolean => !!get(flagName);\n\n  const set = (\n    flagNameOrFlags: FFKeys | Partial<{ [key in FFKeys]: FlagValue }>,\n    value?: FlagValue\n  ) => {\n    if (typeof flagNameOrFlags === 'string') {\n      value !== undefined &&\n        setFlagValue({\n          value,\n          definitions,\n          flagName: String(flagNameOrFlags),\n          storageMap\n        });\n    } else {\n      Object.entries(flagNameOrFlags).forEach(([flagName, value]) => {\n        setFlagValue({\n          value: value as FlagValue,\n          definitions,\n          flagName: String(flagName),\n          storageMap\n        });\n      });\n    }\n  };\n\n  const isOverridden = (flagName: FFKeys) => {\n    const flagDef = getFlagDef({ flagName, definitions });\n    const type = getFlagType({ flagDef });\n    return type === 'boolean'\n      ? isOn(flagName) !== !!getDefault(flagName)\n      : get(flagName) !== getDefault(flagName);\n  };\n\n  const setDefinitions = (newDefinitions: FlagDefinitions) => {\n    definitions = newDefinitions;\n    hydrate();\n  };\n\n  const getDefinitions = () => definitions;\n\n  const getAllResolved = () => {\n    return Object.keys(definitions).reduce<\n      Partial<{ [key in FFKeys]: FlagValue }>\n    >((acc, flagName) => {\n      acc[flagName as FFKeys] = get(flagName as FFKeys);\n      return acc;\n    }, {});\n  };\n\n  const getAllOverridden = () => {\n    return Object.keys(definitions).reduce<\n      Partial<{ [key in FFKeys]: FlagValue }>\n    >((acc, flagName) => {\n      if (isOverridden(flagName as FFKeys)) {\n        acc[flagName as FFKeys] = get(flagName as FFKeys);\n      }\n      return acc;\n    }, {});\n  };\n\n  hydrate();\n\n  return {\n    isOn,\n    get,\n    set,\n    getDefault,\n    isOverridden,\n    setDefinitions,\n    getDefinitions,\n    getAllResolved,\n    getAllOverridden\n  };\n};\n\nexport default flagg;\n","import { FlagValue } from '../core';\n\nexport const KEY_PREFIX = 'ff';\n\nexport const getKey = (key: string) => KEY_PREFIX + '.' + key;\n\nexport const safeParseJSON = (value: any): FlagValue => {\n  try {\n    return JSON.parse(value);\n  } catch (err) {}\n  return value;\n};\n\nconst hasPrefix = (key: string) => key.startsWith(KEY_PREFIX + '.');\n\nconst removePrefix = (key: string) => key.slice(KEY_PREFIX.length + 1);\n\nexport const mapFromStoredValuesWithPrefix = (\n  stored: {\n    [key: string]: FlagValue;\n  },\n  getter: (flagName: string) => FlagValue\n) => {\n  return Object.entries(stored).reduce<{ [key: string]: FlagValue }>(\n    (acc, [key, value]) => {\n      if (hasPrefix(key)) {\n        const flagName = removePrefix(key);\n        acc[flagName] = getter(flagName);\n      }\n      return acc;\n    },\n    {}\n  );\n};\n","import { FlaggStorage, FlagValue } from '../core';\nimport { getKey, mapFromStoredValuesWithPrefix } from './utils';\n\nexport const inMemoryStore = (): FlaggStorage => {\n  const store: { [key: string]: FlagValue } = {};\n  const get = (flagName: string): FlagValue => store[getKey(flagName)] || null;\n  return {\n    name: 'inMemoryStore',\n    get,\n    set: (flagName, value) => {\n      store[getKey(flagName)] = value;\n    },\n    remove: flagName => delete store[getKey(flagName)],\n    all: () => mapFromStoredValuesWithPrefix(store, get)\n  };\n};\n","import { FlaggStorage, FlagValue } from '../core';\nimport { getKey, safeParseJSON, mapFromStoredValuesWithPrefix } from './utils';\n\nexport const sessionStore = (): FlaggStorage => {\n  const get = (flagName: string): FlagValue =>\n    safeParseJSON(window.sessionStorage.getItem(getKey(flagName)));\n\n  return {\n    name: 'sessionStore',\n    get,\n    set: (flagName, value) =>\n      window.sessionStorage.setItem(getKey(flagName), JSON.stringify(value)),\n    remove: flagName => window.sessionStorage.removeItem(getKey(flagName)),\n    all: () => mapFromStoredValuesWithPrefix(window.sessionStorage, get)\n  };\n};\n","export * from './env-store';\nexport * from './in-memory-store';\nexport * from './local-store';\nexport * from './session-store';\nexport * from './url-store';\n","export * from './core';\nexport * from './storage';\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"app_view__2DuWx\"};","import React from 'react';\nimport { inMemoryStore } from '../storage';\nimport { flagg } from '../core';\n\nexport const FlaggContext = React.createContext({\n  featureFlags: flagg({ storage: inMemoryStore() }),\n  iteration: 0\n});\n","export default /* css */ `\n\n.flagg {\n\ttext-align: left;\n\tposition: relative;\n\tbackground-color: #f6f6f9;\n\tpadding-bottom: 3rem;\n\toverflow-y: auto;\n\tmax-height: 100vh;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.flagg * {\n\toutline: none;\n}\n\n.flagg-flag-icon {\n\tcolor: #f44436;\n\tmargin-right: 0.5rem;\n}\n\n.flagg-header {\n\theight: 4rem;\n\tline-height: 4rem;\n\tposition: sticky;\n\ttop: 0;\n\tbackground: black;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 0 1.5rem;\n\tmargin-bottom: 1rem;\n\tz-index: 3;\n}\n\n.flagg-header .flagg-flag-icon {\n\tposition: relative;\n\ttop: 4px;\n}\n\n.flagg-header__name {\n\tfont-size: 1.25rem;\n\tfont-weight: bold;\n\tcolor: white;\n\ttext-transform: uppercase;\n\tletter-spacing: 1px;\n\tdisplay: inline-block;\n\tmargin-right: 2rem;\n}\n\n.flagg-header__lead {\n\tdisplay: flex;\n\tflex: 1;\n\talign-items: center;\n}\n\n.flagg-header__end {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.flagg-category--search {\n\tposition: relative;\n}\n\n.flagg-category--search:focus-within .flagg-search-icon {\n\tcolor: #f44436;\n}\n\n.flagg-search {\n\theight: 4rem;\n\tpadding: 1rem;\n\t-webkit-appearance: none;\n\tfont-size: 1.25rem;\n\tbackground: transparent;\n\tborder: 0;\n\tflex: 1;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\twidth: 100%;\n\theight: 100%;\n\ttext-indent: 3rem;\n}\n\n.flagg-search-icon {\n\tposition: relative;\n\ttop: 4px;\n\ttransition: 0.3s;\n}\n\n.flagg-categories {\n\tpadding: 0 1rem;\n\tflex: 1;\n}\n\n.flagg-category {\n\tpadding: 1rem;\n\tbox-shadow: 0 8px 24px rgba(0,0,0,.033);\n\tborder-radius: 0.75rem;\n\tmax-width: 50rem;\n\tmargin: 1rem auto;\n\tbackground: white;\n}\n\n.flagg-control {\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 1;\n\tmargin-left: 0.5rem;\n\tjustify-content: flex-end;\n}\n\n.flagg-control .flagg-flag-icon {\n\ttransition: 0.2s;\n\topacity: 0;\n\ttransform: scale(0);\t\n}\n\n.flagg-control--override .flagg-flag-icon {\n\topacity: 1;\n\ttransform: scale(1);\n}\n\n.flagg-control--override .flagg-flag-icon:hover {\n\tcursor: pointer;\n\t\n}\n\n.flagg-zero {\n\ttext-align: center;\n\tfont-size: 2rem;\n\tpadding: 4rem;\n\topacity: 0.5;\n}\n\n.flagg-category__name {\n\ttext-transform: capitalize;\n\tfont-size: 1.75rem;\n\tfont-weight: bold;\n\tmargin-bottom: 1rem;\n}\n\n.flagg-button {\n\t-webkit-appearance: none;\n\tbackground: none;\n\tcolor: white;\n\tborder: 0;\n\ttext-transform: uppercase;\n\tfont-size: 1rem;\n\tfont-weight: 500;\n\tletter-spacing: 1px;\n\theight: 2.25rem;\n\tmargin: 0 0.5rem;\n\tcursor: pointer;\n\tborder-radius: 0.1875rem;\n}\n\n.flagg-button:hover, .flagg-button:focus {\n\tbackground-color: rgba(255,255,255, 0.1);\n}\n\n.flagg-flag {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\tjustify-content: space-between;\n\tfont-size: 1.25rem;\n\tmargin: 0 -1rem;\n\tpadding: 0.75rem 1rem;\n\tcursor: pointer;\n}\n\n.flagg-flag > div:first-child {\n\tmax-width: calc(100% - 7rem);\n}\n\n.flagg-flag:hover {\n\tbackground-color: rgba(0,0,0,.05);\n}\n\n.flagg-flag__category-name {\n\topacity: 0.7;\n}\n\n.flagg-flag__name {\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.flagg-flag__flag-name {\n\tfont-weight: 500;\n}\n\n.flagg-flag__description {\n\tfont-size: 0.875rem;\n\topacity: 0.7;\n\tmargin-top: 0.25rem;\n}\n\n.flagg-select {\n\tfont-size: 1.25rem;\n}\n\n.flagg-input {\n\tfont-size: 1.25rem;\n\ttext-align: center;\n\tline-height: 2rem;\n\tpadding: 0 0.5rem;\n\tborder-radius: 0.1875rem;\n\tborder: 1px solid rgba(0,0,0,.2);\n\twidth: 100%;\n}\n\n.flagg-toggle {\n\t-webkit-appearance: none;\n\t-moz-appearance: none;\n\tappearance: none;\n\twidth: 3.875rem;\n\theight: 2rem;\n\tdisplay: inline-block;\n\tposition: relative;\n\tborder-radius: 3.125rem;\n\toverflow: hidden;\n\toutline: none;\n\tborder: none;\n\tcursor: pointer;\n\tbackground-color: #A0A0A0;\n\ttransition: background-color ease 0.3s;\n\t\n}\n\n.flagg-toggle:before {\n\tcontent: \"on off\";\n\tdisplay: block;\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.75rem;\n\theight: 1.75rem;\n\tbackground: #fff;\n\tleft: 2px;\n\ttop: 2px;\n\tborder-radius: 50%;\n\tfont: 0.625rem/1.75rem Helvetica;\n\ttext-transform: uppercase;\n\tfont-weight: bold;\n\ttext-indent: -1.375rem;\n\tword-spacing: 2.3125rem;\n\tcolor: #fff;\n\twhite-space: nowrap;\n\tbox-shadow: 0 1px 2px rgba(0,0,0,0.2);\n\ttransition: all cubic-bezier(0.3, 1.5, 0.7, 1) 0.3s;\n}\n\n.flagg-toggle:checked {\n\tbackground-color: limegreen;\n}\n\n.flagg-toggle:checked:before {\n\tleft: 2rem;\n}\n\n.flagg-footer {\n\ttext-align: center;\n\tfont-size: 0.875rem;\n\tpadding-top: 1rem;\n}\n`;\n","import React, { useContext, useState } from 'react';\nimport { flagg } from '../core';\nimport { FlagDefinitions, FlagDefinition } from '../core';\nimport { FlaggContext } from './context';\nimport styles from './admin-styles';\n\nexport function FlaggAdmin({ onDone }: { onDone?: () => void }) {\n  const [searchTerm, setSearchTerm] = useState('');\n  const { featureFlags: ff } = useContext(FlaggContext);\n  const definitions = getSortedDefinitions(\n    ff.getDefinitions(),\n    searchTerm.toLowerCase().trim()\n  );\n\n  const shareUrl = `${window.location.href}?ff=${encodeURIComponent(\n    JSON.stringify(ff.getAllOverridden())\n  )}`;\n\n  const reset = () => {\n    Object.entries(ff.getDefinitions()).forEach(([flagName, flagDef]) => {\n      ff.set(flagName, ff.getDefault(flagName));\n    });\n  };\n\n  return (\n    <div className=\"flagg\">\n      <style>{styles}</style>\n      <div className=\"flagg-header\">\n        <div className=\"flagg-header__lead\">\n          <span className=\"flagg-header__name\">\n            <Icon icon=\"flag\" />\n            <span>Flagg</span>\n          </span>\n        </div>\n\n        <div className=\"flagg-header__end\">\n          <button\n            className=\"flagg-button\"\n            onClick={() => navigator.clipboard.writeText(shareUrl)}\n          >\n            <Icon icon=\"link\" />\n          </button>\n          <button className=\"flagg-button\" onClick={reset}>\n            <Icon icon=\"refresh\" />\n          </button>\n          {onDone && (\n            <button className=\"flagg-button\" onClick={onDone}>\n              <Icon icon=\"checkCircle\" />\n            </button>\n          )}\n        </div>\n      </div>\n      <div className=\"flagg-categories\">\n        <div className=\"flagg-category flagg-category--search\">\n          <Icon icon=\"search\" />\n          <input\n            value={searchTerm}\n            onChange={evt => setSearchTerm(evt.currentTarget.value)}\n            className=\"flagg-search\"\n            type=\"search\"\n            placeholder=\"Search Feature Flags\"\n          />\n        </div>\n        {!definitions.length && (\n          <div className=\"flagg-zero\">Nothing to see here...</div>\n        )}\n        {definitions.map(({ categoryName, values }) => {\n          return (\n            <div key={categoryName} className=\"flagg-category\">\n              <div className=\"flagg-category__name\">\n                {categoryName || 'Flags'}\n              </div>\n              {values.map(({ flagName, name, definition }) => (\n                <Flag\n                  key={flagName}\n                  name={name}\n                  categoryName={categoryName}\n                  flagName={flagName}\n                  definition={definition}\n                  ff={ff}\n                />\n              ))}\n            </div>\n          );\n        })}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nfunction Footer() {\n  return (\n    <div className=\"flagg-footer\">\n      Made with ❤️in Sunny FL &middot;{' '}\n      <a href=\"https://github.com/jamesmfriedman/flagg\">Visit Github</a>\n    </div>\n  );\n}\n\nconst iconPaths = {\n  flag: 'M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z',\n  search:\n    'M7,0 C3.1458514,0 0,3.1458514 0,7 C0,10.854149 3.1458514,14 7,14 C8.747998,14 10.345009,13.348024 11.574219,12.28125 L12,12.707031 L12,14 L18,20 L20,18 L14,12 L12.707031,12 L12.28125,11.574219 C13.348024,10.345009 14,8.747998 14,7 C14,3.1458514 10.854149,0 7,0 Z M7,2 C9.773268,2 12,4.2267316 12,7 C12,9.773268 9.773268,12 7,12 C4.2267316,12 2,9.773268 2,7 C2,4.2267316 4.2267316,2 7,2 Z',\n  refresh:\n    'M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z',\n  checkCircle:\n    'M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z',\n  link:\n    'M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z'\n};\n\nfunction Icon({\n  icon,\n  ...props\n}: { icon: keyof typeof iconPaths } & React.HTMLProps<any>) {\n  const path = iconPaths[icon];\n  return (\n    <svg\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      {...props}\n      className={`flagg-${icon}-icon`}\n    >\n      <path fill=\"currentColor\" d={path} />\n    </svg>\n  );\n}\n\nfunction Flag({\n  definition,\n  flagName,\n  name,\n  ff,\n  categoryName\n}: {\n  flagName: string;\n  definition: FlagDefinition;\n  name: string;\n  ff: ReturnType<typeof flagg>;\n  categoryName: string;\n}) {\n  let control = null;\n  const controlType = getControlType(definition);\n  const isOverride = ff.isOverridden(flagName);\n\n  switch (controlType) {\n    case 'select':\n      control = (\n        <Select\n          value={ff.get(flagName) as string}\n          options={definition.options as string[]}\n          defaultValue={definition.default as string}\n          onChange={evt => ff.set(flagName, evt.currentTarget.value || null)}\n        />\n      );\n\n      break;\n    case 'input':\n      control = (\n        <Input\n          value={ff.get(flagName) as string}\n          onChange={evt => ff.set(flagName, evt.currentTarget.value || null)}\n        />\n      );\n      break;\n    case 'toggle':\n    default:\n      control = <Toggle checked={ff.isOn(flagName)} onChange={() => {}} />;\n  }\n\n  return (\n    <div\n      key={flagName}\n      className=\"flagg-flag\"\n      onClick={\n        controlType === 'toggle'\n          ? () => ff.set(flagName, !ff.get(flagName))\n          : undefined\n      }\n    >\n      <div>\n        <div className=\"flagg-flag__name\">\n          {/* <span className=\"flagg-flag__category-name\">\n            {categoryName}\n            {!!categoryName && '.'}\n          </span> */}\n          <span className=\"flagg-flag__flag-name\">{name}</span>\n        </div>\n        {!!definition.description && (\n          <div className=\"flagg-flag__description\">\n            {definition.description}\n          </div>\n        )}\n      </div>\n      <div\n        title={flagName + ' - Default: ' + String(ff.getDefault(flagName))}\n        className={[\n          'flagg-control',\n          isOverride && 'flagg-control--override'\n        ]\n          .filter(Boolean)\n          .join(' ')}\n      >\n        <Icon\n          icon=\"flag\"\n          onClick={evt => {\n            evt.stopPropagation();\n            ff.set(flagName, ff.getDefault(flagName));\n          }}\n        />{' '}\n        {control}\n      </div>\n    </div>\n  );\n}\n\nfunction Toggle({ ...props }: React.HTMLProps<HTMLInputElement>) {\n  return <input type=\"checkbox\" className=\"flagg-toggle\" {...props} />;\n}\n\nfunction Input({ ...props }: React.HTMLProps<HTMLInputElement>) {\n  return <input type=\"text\" className=\"flagg-input\" {...props} />;\n}\n\nfunction Select({\n  options,\n  defaultValue,\n  value,\n  ...props\n}: { options: string[]; defaultValue?: string } & React.HTMLProps<\n  HTMLSelectElement\n>) {\n  return (\n    <select className=\"flagg-select\" value={value || ''} {...props}>\n      {!defaultValue && <option value={''}>-- OFF --</option>}\n      {options.map(option => (\n        <option key={option} value={option}>\n          {option}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nconst getControlType = (definition: FlagDefinition) => {\n  if (definition.options) {\n    return 'select';\n  }\n\n  if (typeof definition.default === 'string') {\n    return 'input';\n  }\n\n  return 'toggle';\n};\n\nconst getSortedDefinitions = (\n  definitions: FlagDefinitions,\n  searchTerm: string\n) => {\n  const defsMap = Object.entries(definitions).reduce<{\n    [key: string]: Array<{\n      name: string;\n      flagName: string;\n      definition: FlagDefinition;\n    }>;\n  }>((acc, [flagName, flagDef]) => {\n    const parts = flagName.split('.', 2);\n    const category = parts.length > 1 ? parts[0] : '';\n    const name = parts.pop() as string;\n    acc[category] = acc[category] || [];\n\n    const shouldAdd =\n      !searchTerm ||\n      (flagName.toLowerCase().includes(searchTerm) ||\n        (flagDef.description || '').toLowerCase().includes(searchTerm));\n\n    shouldAdd &&\n      acc[category].push({\n        flagName,\n        name,\n        definition: flagDef\n      });\n    return acc;\n  }, {});\n\n  return Object.entries(defsMap)\n    .filter(([, values]) => values.length)\n    .map(([categoryName, values]) => {\n      return {\n        categoryName,\n        values: values.sort((a, b) => (a.name > b.name ? 1 : -1))\n      };\n    })\n    .sort((a, b) => (a.categoryName > b.categoryName ? 1 : -1));\n};\n","import { useContext } from 'react';\nimport { FlaggContext } from './context';\nimport { FlagValue } from '../core';\n\n/****************************************************************\n * Hooks\n ****************************************************************/\n\nexport const useFeatureFlag = (\n  flagName: string\n): [boolean, (value: FlagValue) => void] => {\n  const { featureFlags } = useContext(FlaggContext);\n  return [\n    featureFlags.isOn(flagName),\n    (value: FlagValue) => featureFlags.set(flagName, value)\n  ];\n};\n\nexport const useFeatureValue = <T extends FlagValue>(\n  flagName: string\n): [T, (value: FlagValue) => void] => {\n  const { featureFlags } = useContext(FlaggContext);\n  return [\n    (featureFlags.get(flagName) as unknown) as T,\n    (value: FlagValue) => featureFlags.set(flagName, value)\n  ];\n};\n","import {\n  useFeatureFlag as ffUseFeatureFlag,\n  useFeatureValue as ffUseFeatureValue\n} from 'flagg/react';\nimport { FlagValue } from 'flagg';\n\nexport const definitions = {\n  'app.title': {\n    default: 'InstaSnap'\n  },\n  'app.darkMode': {\n    default: false\n  },\n  'app.brandColor': {\n    default: '#6200ee',\n    options: ['#6200ee', '#009688', '#e91e64']\n  },\n  'app.bottomNav': {\n    default: false\n  },\n  'developer.debug': {},\n  'developer.enableFlagg': {\n    default: true,\n    description: 'Very meta... A feature flag to enable Flagg.'\n  },\n  'developer.enableExperimentalFeatures': {},\n  'developer.apiUrl': {\n    default: 'http://www.example.com/graphql'\n  },\n  'home.enableV2OptIn': {\n    default: true\n  },\n  'home.v2': {\n    default: false\n  }\n};\n\nexport const useFeatureFlag = (flagName: keyof typeof definitions) =>\n  ffUseFeatureFlag(flagName);\nexport const useFeatureValue = <T extends FlagValue>(\n  flagName: keyof typeof definitions\n) => ffUseFeatureValue<T>(flagName);\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardPrimaryAction,\n  CardMedia,\n  Typography,\n  CardActions,\n  CardActionButtons,\n  CardActionButton,\n  CardActionIcons,\n  CardActionIcon\n} from 'rmwc';\n\nimport styles from './home.module.css';\nimport { useFeatureFlag } from '../feature-flags';\n\nexport function Home() {\n  const cards = [...Array(5)];\n  const [enableOptIn] = useFeatureFlag('home.enableV2OptIn');\n  const [, setHomeV2] = useFeatureFlag('home.v2');\n\n  return (\n    <div>\n      {enableOptIn && (\n        <div className={styles.banner} onClick={() => setHomeV2(true)}>\n          🎈 Try the new home experience! <Button>Try It</Button>\n        </div>\n      )}\n\n      {cards.map((val, index) => (\n        <HomeCard key={index} index={index + 1} />\n      ))}\n    </div>\n  );\n}\n\nfunction HomeCard({ index }: { index: number }) {\n  return (\n    <Card className={styles.homeCard}>\n      <CardPrimaryAction>\n        <CardMedia\n          sixteenByNine\n          style={{\n            backgroundImage: `url(images/backgrounds/mb-bg-fb-2${index}.png)`\n          }}\n        />\n        <div style={{ padding: '0 1rem 1rem 1rem' }}>\n          <Typography use=\"headline6\" tag=\"h2\">\n            Our Changing Planet\n          </Typography>\n          <Typography\n            use=\"subtitle2\"\n            tag=\"h3\"\n            theme=\"textSecondaryOnBackground\"\n            style={{ marginTop: '-1rem' }}\n          >\n            by Kurt Wagner\n          </Typography>\n          <Typography use=\"body1\" tag=\"div\" theme=\"textSecondaryOnBackground\">\n            Visit ten places on our planet that are undergoing the biggest\n            changes today.\n          </Typography>\n        </div>\n      </CardPrimaryAction>\n      <CardActions>\n        <CardActionButtons>\n          <CardActionButton>Comment</CardActionButton>\n        </CardActionButtons>\n        <CardActionIcons>\n          <CardActionIcon onIcon=\"favorite\" icon=\"favorite_border\" />\n          <CardActionIcon icon=\"share\" />\n          <CardActionIcon icon=\"more_vert\" />\n        </CardActionIcons>\n      </CardActions>\n    </Card>\n  );\n}\n","import React from 'react';\nimport { useFeatureFlag } from 'flagg/react';\nimport styles from './home.module.css';\nimport { Button } from 'rmwc';\n\nexport function HomeNew() {\n  const [homeV2, setHomeV2] = useFeatureFlag('home.v2');\n  return (\n    <div>\n      <div className={styles.banner} onClick={() => setHomeV2(false)}>\n        Use the old home instead... <Button>Go Back</Button>\n      </div>\n      New Home\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport 'material-components-web/dist/material-components-web.min.css';\nimport styles from './demo.module.css';\nimport classNames from 'classnames';\n\nimport {\n  SimpleTopAppBar,\n  Tab,\n  TabBar,\n  Drawer,\n  DrawerHeader,\n  DrawerTitle,\n  DrawerSubtitle,\n  DrawerContent,\n  List,\n  ListItem\n} from 'rmwc';\nimport { Home } from './home';\nimport { HomeNew } from './home-new';\nimport { useFeatureFlag, useFeatureValue } from '../feature-flags';\nimport { FlaggAdmin } from 'flagg/react';\n\nexport function Demo() {\n  const [route, setRoute] = useState('home');\n  const [navOpen, setNavOpen] = useState(false);\n\n  const [isDarkMode] = useFeatureFlag('app.darkMode');\n  const [title] = useFeatureValue<string>('app.title');\n  const [brandColor] = useFeatureValue<string>('app.brandColor');\n  const [isBottomNav] = useFeatureFlag('app.bottomNav');\n  const [homeV2] = useFeatureFlag('home.v2');\n  const [enableFlagg] = useFeatureFlag('developer.enableFlagg');\n\n  let content = null;\n  switch (route) {\n    case 'home':\n      content = !!homeV2 ? <HomeNew /> : <Home />;\n      break;\n    case 'featureflags':\n      content = enableFlagg ? <FlaggAdmin /> : null;\n      break;\n    default:\n      break;\n  }\n\n  return (\n    <div\n      className={styles.view}\n      style={\n        {\n          '--mdc-theme-primary': brandColor\n        } as React.CSSProperties\n      }\n    >\n      <div className={styles.callout}>\n        <h1>Flagg Demo</h1>\n        This demo is to showcase how a real app might react to Feature Flags\n        specified using Flagg. The admin interface (pictured left) is an\n        optional React component that you can mount at a secret route of your\n        app that provides visibility and control of your Feature Flags when\n        developing.\n      </div>\n      <div className={styles.appWrapper}>\n        <div\n          className={classNames(styles.app, {\n            [styles.darkMode]: isDarkMode\n          })}\n        >\n          {isBottomNav ? (\n            <>\n              <div className={styles.bottomNavHeader}>{title}</div>\n              <div className={styles.bottomNav}>\n                <TabBar>\n                  <Tab stacked icon=\"chrome_reader_mode\" label=\"Feed\" />\n                  <Tab stacked icon=\"person\" label=\"Profile\" />\n                  <Tab\n                    stacked\n                    icon=\"more_horiz\"\n                    label=\"More\"\n                    onClick={() => setNavOpen(true)}\n                  />\n                </TabBar>\n              </div>\n            </>\n          ) : (\n            <SimpleTopAppBar\n              navigationIcon={{\n                onClick: () => setNavOpen(true)\n              }}\n              title={title}\n              className={styles.appBar}\n            />\n          )}\n          <AppDrawer\n            open={navOpen}\n            setOpen={setNavOpen}\n            setRoute={route => {\n              setRoute(route);\n              setNavOpen(false);\n            }}\n          />\n          <div className={styles.content}>{content}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction AppDrawer({\n  open,\n  setOpen,\n  setRoute\n}: {\n  open: boolean;\n  setOpen: (bool: boolean) => void;\n  setRoute: (route: string) => void;\n}) {\n  const [enableFlagg] = useFeatureFlag('developer.enableFlagg');\n  const [title] = useFeatureValue('app.title');\n\n  return (\n    <Drawer modal open={open} onClose={() => setOpen(false)}>\n      <DrawerHeader>\n        <DrawerTitle>{title}</DrawerTitle>\n      </DrawerHeader>\n      <DrawerContent>\n        <List>\n          <ListItem onClick={() => setRoute('home')}>Feed</ListItem>\n          <ListItem onClick={() => setRoute('home')}>Profile</ListItem>\n          {enableFlagg && (\n            <ListItem onClick={() => setRoute('featureflags')}>\n              Feature Flags\n            </ListItem>\n          )}\n          <ListItem onClick={() => setRoute('home')}>Logout</ListItem>\n        </List>\n      </DrawerContent>\n    </Drawer>\n  );\n}\n","import React from 'react';\nimport styles from './app.module.css';\nimport { FlaggAdmin } from './flagg/react';\nimport { Demo } from './demo/demo';\n\nfunction App() {\n  return (\n    <div className={styles.view}>\n      <FlaggAdmin />\n      <Demo />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\nimport * as serviceWorker from './serviceWorker';\nimport { definitions } from './feature-flags';\n\nimport { flagg, sessionStore } from './flagg';\nimport { FlaggProvider } from './flagg/react';\n\nconst featureFlags = flagg<keyof typeof definitions>({\n  storage: sessionStore(),\n  definitions\n});\n\nReactDOM.render(\n  <FlaggProvider featureFlags={featureFlags}>\n    <App />\n  </FlaggProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useState, useEffect } from 'react';\nimport { flagg } from '../core';\nimport { FlaggContext } from './context';\n\nexport function FlaggProvider<FF extends ReturnType<typeof flagg> | any>({\n  children,\n  featureFlags\n}: {\n  children: React.ReactNode;\n  featureFlags: FF;\n}) {\n  const [iteration, setIteration] = useState(0);\n  const ff = (featureFlags as unknown) as ReturnType<typeof flagg>;\n\n  useEffect(() => {\n    const originalSet = featureFlags.set;\n\n    ff.set = (...args) => {\n      const rVal = originalSet(...args);\n      setIteration(val => val + 1);\n      return rVal;\n    };\n  }, []);\n\n  return (\n    <FlaggContext.Provider value={{ featureFlags: ff, iteration }}>\n      {children}\n    </FlaggContext.Provider>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"view\":\"demo_view__3WA2d\",\"appWrapper\":\"demo_appWrapper__fgOro\",\"app\":\"demo_app__21s33\",\"darkMode\":\"demo_darkMode__75EcZ\",\"content\":\"demo_content__1ou7d\",\"appBar\":\"demo_appBar__1wE_C\",\"bottomNavHeader\":\"demo_bottomNavHeader__HIv0o\",\"bottomNav\":\"demo_bottomNav__OwTRM\",\"callout\":\"demo_callout__3gmYC\"};"],"sourceRoot":""}